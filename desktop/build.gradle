buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin"
        classpath "de.dynamicfiles.projects.gradle.plugins:javafx-gradle-plugin:$versions.jfxGradlePlugin"
    }
}

apply plugin: 'kotlin'
apply plugin: 'application'
apply plugin: 'javafx-gradle-plugin'

mainClassName = 'io.slychat.messenger.desktop.DesktopApp'

sourceSets.main.resources.srcDirs += "$rootProject.projectDir/ui"

dependencies {
    compile project(':ui-services')

    compile "com.vfpowertech:jsbridge-desktop-webengine:$versions.jsbridge"
    compile "nl.komponents.kovenant:kovenant-jfx:$versions.kovenant"
    compile "io.reactivex:rxjavafx:$versions.rxjavafx"

    compile "ch.qos.logback:logback-classic:$versions.logbackClassic"

    compile "org.controlsfx:controlsfx:$versions.controlsFx"
}

jfx {
    mainClass = mainClassName

    jfxMainAppJarName = 'sly-messenger.jar'

    appName = 'sly-messenger'

    vendor = 'Keystream Information Systems'

    //the plugin refuses to run jfxNative without this, even if no gradle instances are running, or via --no-daemon
    //this is to get around a cleaning bug involving a dangling fd on windows
    //see https://github.com/FibreFoX/javafx-gradle-plugin/issues/12
    skipDaemonModeCheck = true
}
