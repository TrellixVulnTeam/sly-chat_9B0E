diff --git a/ant/build.gant b/ant/build.gant
index 1e4e4ab..bf91644 100644
--- a/ant/build.gant
+++ b/ant/build.gant
@@ -223,7 +223,9 @@ target(name: 'lib.link') {
       } else {
         def clargs = antProp("${buildtype}.cc.args") + " " + antProp("cc.args.${platform}") + " " + compilerArgs
         def soname = (os == "linux") ? "-Wl,-soname=${libname(platform, buildtype)}" : ""
-        ant.exec(dir: mod, command: "${antProp('cc')} $clargs ${antProp('cc.link')} $soname -o $out/${libname(platform, buildtype)} $cc/sqlite3.o $cc/sqlite_wrap.o $cc/sqlite3_wrap_manual.o $cc/intarray.o")
+        def rootDir = "{{prefix}}"
+        def archives = "-Wl,-whole-archive $rootDir/lib/libsqlcipher.a $rootDir/lib/libcrypto.a -Wl,-no-whole-archive"
+        ant.exec(dir: mod, command: "${antProp('cc')} $clargs ${antProp('cc.link')} $soname -o $out/${libname(platform, buildtype)} -Wl,-z,noexecstack $archives $cc/sqlite_wrap.o $cc/sqlite3_wrap_manual.o $cc/intarray.o")
       }
     }
   }
diff --git a/ant/linux.properties b/ant/linux.properties
index 373a49d..128653b 100644
--- a/ant/linux.properties
+++ b/ant/linux.properties
@@ -4,18 +4,18 @@ lib.suffix=.so
 swig=swig
 swig.home=/usr
 cc=gcc
-cc.link=-shared -mno-cygwin
+cc.link=-shared
 lib.os.suffix=-linux

 release.cc.args=-O2 -DNDEBUG -fpic -Di586 -DARCH='"i586"' -DLINUX -D_LARGEFILE64_SOURCE -D_GNU_SOURCE \
-  -D_LITTLE_ENDIAN -fno-omit-frame-pointer -fno-strict-aliasing -static-libgcc -I./sqlite -I${jdk.home}/include \
+  -D_LITTLE_ENDIAN -fno-omit-frame-pointer -fno-strict-aliasing -I./sqlite -I${jdk.home}/include \
   -I${jdk.home}/include/linux

 debug.cc.args=-g -fpic -Di586 -DARCH='"i586"' -DLINUX -D_LARGEFILE64_SOURCE -D_GNU_SOURCE \
-  -D_LITTLE_ENDIAN -fno-omit-frame-pointer -fno-strict-aliasing -static-libgcc -I./sqlite -I${jdk.home}/include \
+  -D_LITTLE_ENDIAN -fno-omit-frame-pointer -fno-strict-aliasing -I./sqlite -I${jdk.home}/include \
   -I${jdk.home}/include/linux

-platforms=linux-i386, linux-amd64
+platforms=linux-amd64

 cc.args.linux-i386=-m32
 cc.args.linux-amd64=-m64
